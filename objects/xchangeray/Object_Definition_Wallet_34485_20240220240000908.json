{"enableComments":false,"objectRelationships":[{"objectDefinitionSystem2":false,"objectField":{"relationshipType":"oneToMany","indexed":true,"localized":false,"objectFieldSettings":[{"name":"objectDefinition1ShortName","value":"Wallet"},{"name":"objectRelationshipERCObjectFieldName","value":"r_wallet_c_walletERC"}],"readOnly":"false","DBType":"Long","label":{"en_US":"Wallet"},"type":"Long","required":true,"externalReferenceCode":"05b90510-4f99-5d6d-00bc-a55cf957e61a","indexedAsKeyword":false,"system":false,"indexedLanguageId":"","unique":false,"name":"r_wallet_c_walletId","state":false,"businessType":"Relationship","readOnlyConditionExpression":""},"parameterObjectFieldName":"","parameterObjectFieldId":0,"label":{"en_US":"Wallet"},"reverse":false,"type":"oneToMany","externalReferenceCode":"89a56f67-d43b-81c6-c62d-d7bf95270440","objectDefinitionModifiable2":true,"system":false,"name":"wallet","deletionType":"prevent","objectDefinitionExternalReferenceCode1":"4798daf4-a124-4894-f8e7-a718dc074e79","objectDefinitionExternalReferenceCode2":"0be80a07-3b88-aa89-0028-da18eea4d7e3","objectDefinitionName2":"Transaction"}],"enableCategorization":false,"accountEntryRestrictedObjectFieldName":"","objectActions":[{"conditionExpression":"","objectActionExecutorKey":"groovy","errorMessage":{},"active":true,"description":"Generates the private and public keys for the wallet object","label":{"en_US":"SetKeys"},"externalReferenceCode":"a6767fe2-495d-a7dd-6f8a-bd4c4c083c46","system":false,"objectActionTriggerKey":"onAfterAdd","name":"setKeys","parameters":{"script":"package com.liferay.xchangeray.objects.wallet\n\nimport java.security.KeyPair\nimport java.security.KeyPairGenerator\nimport java.security.SecureRandom\nimport java.security.spec.ECGenParameterSpec\n\nimport com.liferay.object.service.ObjectEntryLocalServiceUtil\nimport com.liferay.portal.kernel.service.ServiceContext\n\ndef wallet = new Wallet()\n\ndef userId = Long.valueOf(creator)\ndef entryValues = [privateKey: wallet.privateKey, publicKey: wallet.publicKey]\n\nObjectEntryLocalServiceUtil.updateObjectEntry(userId, id, entryValues, new ServiceContext())\n\nclass Wallet {\n\n\tdef KeyPair keyPair\n\n\tWallet() {\n\t\tthis.keyPair = this.generateKeyPair()\n\t}\n\n\tString getPrivateKey() {\n\t\treturn Base64.encoder.encodeToString(keyPair.getPrivate().getEncoded())\n\t}\n\n\tString getPublicKey() {\n\t\treturn Base64.encoder.encodeToString(keyPair.getPublic().getEncoded())\n\t}\n\n\tprivate KeyPair generateKeyPair() {\n\t\tdef keyGen = KeyPairGenerator.getInstance(\"EC\")\n\t\tdef ecSpec = new ECGenParameterSpec(\"secp256r1\")\n\t\tkeyGen.initialize(ecSpec, new SecureRandom())\n\t\treturn keyGen.generateKeyPair()\n\t}\n}"},"status":{"label_i18n":"Success","code":1,"label":"success"}}],"enableLocalization":false,"accountEntryRestricted":false,"externalReferenceCode":"4798daf4-a124-4894-f8e7-a718dc074e79","objectFields":[{"indexed":false,"localized":false,"objectFieldSettings":[],"readOnly":"true","DBType":"String","label":{"en_US":"Author"},"type":"String","required":false,"externalReferenceCode":"0dcfd6ce-fc91-bb20-c70e-f46e96e98d22","indexedAsKeyword":false,"system":true,"indexedLanguageId":"","unique":false,"name":"creator","state":false,"businessType":"Text","readOnlyConditionExpression":""},{"indexed":false,"localized":false,"objectFieldSettings":[],"readOnly":"true","DBType":"Date","label":{"en_US":"Create Date"},"type":"Date","required":false,"externalReferenceCode":"df74f9b8-28cc-a4c0-65f9-f40fda0bbed6","indexedAsKeyword":false,"system":true,"indexedLanguageId":"","unique":false,"name":"createDate","state":false,"businessType":"Date","readOnlyConditionExpression":""},{"indexed":false,"localized":false,"objectFieldSettings":[],"readOnly":"false","DBType":"String","label":{"en_US":"External Reference Code"},"type":"String","required":false,"externalReferenceCode":"27d8a88b-7151-4d26-a348-8518a568a37f","indexedAsKeyword":false,"system":true,"indexedLanguageId":"","unique":false,"name":"externalReferenceCode","state":false,"businessType":"Text","readOnlyConditionExpression":""},{"indexed":true,"localized":false,"objectFieldSettings":[],"readOnly":"true","DBType":"Long","label":{"en_US":"ID"},"type":"Long","required":false,"externalReferenceCode":"a27d23a7-085e-bb63-910e-c68d04e793e1","indexedAsKeyword":true,"system":true,"indexedLanguageId":"","unique":false,"name":"id","state":false,"businessType":"LongInteger","readOnlyConditionExpression":""},{"indexed":false,"localized":false,"objectFieldSettings":[],"readOnly":"true","DBType":"Date","label":{"en_US":"Modified Date"},"type":"Date","required":false,"externalReferenceCode":"6c984adb-456d-a249-2583-ea142667c34e","indexedAsKeyword":false,"system":true,"indexedLanguageId":"","unique":false,"name":"modifiedDate","state":false,"businessType":"Date","readOnlyConditionExpression":""},{"indexed":false,"localized":false,"objectFieldSettings":[],"readOnly":"true","DBType":"String","label":{"en_US":"Status"},"type":"String","required":false,"externalReferenceCode":"f9d8f18c-137a-8988-47a7-cd77a6872f49","indexedAsKeyword":false,"system":true,"indexedLanguageId":"","unique":false,"name":"status","state":false,"businessType":"Text","readOnlyConditionExpression":""},{"indexed":true,"localized":false,"objectFieldSettings":[],"readOnly":"false","DBType":"String","label":{"en_US":"Name"},"type":"String","required":true,"externalReferenceCode":"f50afe1e-5230-9d13-d0a3-cc4debf25e07","indexedAsKeyword":false,"system":false,"indexedLanguageId":"","unique":false,"name":"name","state":false,"businessType":"Text","readOnlyConditionExpression":""},{"indexed":true,"localized":false,"objectFieldSettings":[{"name":"showCounter","value":false}],"readOnly":"false","DBType":"Clob","label":{"en_US":"Private Key"},"type":"Clob","required":false,"externalReferenceCode":"0049c250-4d76-8572-79b7-c37a06be7300","indexedAsKeyword":false,"system":false,"indexedLanguageId":"","unique":false,"name":"privateKey","state":false,"businessType":"LongText","readOnlyConditionExpression":""},{"indexed":true,"localized":false,"objectFieldSettings":[{"name":"showCounter","value":false}],"readOnly":"false","DBType":"Clob","label":{"en_US":"Public Key"},"type":"Clob","required":false,"externalReferenceCode":"e6802c58-bb9e-423c-041a-b8ced887a49e","indexedAsKeyword":false,"system":false,"indexedLanguageId":"","unique":false,"name":"publicKey","state":false,"businessType":"LongText","readOnlyConditionExpression":""}],"restContextPath":"/o/c/wallets","scope":"company","portlet":true,"modifiable":true,"parameterRequired":false,"enableObjectEntryHistory":false,"titleObjectFieldName":"name","objectValidationRules":[],"active":true,"defaultLanguageId":"en_US","label":{"en_US":"Wallet"},"panelCategoryKey":"applications_menu.applications.custom.apps","pluralLabel":{"en_US":"Wallets"},"objectLayouts":[],"system":false,"objectViews":[],"name":"Wallet","actions":{"permissions":{},"get":{},"update":{},"delete":{}},"status":{"label_i18n":"Approved","code":0,"label":"approved"}}